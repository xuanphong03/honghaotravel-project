'use client';
import React, { useEffect, useRef, useState } from 'react';
import { gsap } from 'gsap';
import { MotionPathPlugin } from 'gsap/MotionPathPlugin';
import Image from 'next/image';

gsap.registerPlugin(MotionPathPlugin);

const TestM = ({ commit }) => {
  const motoRef = useRef(null);
  const nuiRef = useRef(null);
  const nuiRef2 = useRef(null);
  const [isMobile, setIsMobile] = useState(0);

  useEffect(() => {
    setIsMobile(window.innerWidth < 640);

    if (motoRef.current && nuiRef.current) {
      const path = isMobile
        ? nuiRef2.current.querySelector('path')
        : nuiRef.current.querySelector('path');

      if (path) {
        const tl2 = gsap.timeline({
          scrollTrigger: {
            trigger: commit.current,
            start: '-40% center',
            end: '70% center',
            end: false,
            markers: false,
            once: true, // Hiệu ứng chỉ chạy một lần
            scrub: false,
          },
        });
        tl2.to(motoRef.current, {
          motionPath: {
            path: path,
            align: path,
            alignOrigin: [0.9, 0.9],
            start: isMobile ? 0.02 : 0.04,
            end: isMobile ? 0.05 : 0.16,
          },
          duration: isMobile ? 4 : 7,
        });
      } else {
        console.error('Không tìm thấy đường dẫn trong #nui');
      }
    } else {
      console.error('Không tìm thấy #moto hoặc #nui');
    }
  }, [isMobile]);

  return (
    <div
      style={{ position: 'absolute', width: '100%', height: '100%' }}
      className="test-m top-0 right-0 bottom-0 left-0"
    >
      <div className="bg-nui absolute top-[4.5rem] right-0 left-0 h-[11.42575rem] w-full sm:hidden">
        <Image
          src="/images/about/commit-mmb3.png"
          alt="Hong Hao Travel"
          fill
        ></Image>
      </div>
      <svg
        ref={motoRef}
        xmlns="http://www.w3.org/2000/svg"
        className="absolute -top-[2.6rem] left-0 h-[3.3125rem] w-[4.0625rem] sm:-top-[1.5rem] sm:left-[13rem]"
        viewBox="0 0 71 60"
        fill="none"
      >
        <g clipPath="url(#clip0_11309_36)">
          <path
            d="M9.84463 38.1497C11.7748 37.3206 13.8983 37.5608 15.5518 38.602C13.7849 37.2873 11.3813 36.9205 9.20997 37.8519C5.98091 39.2379 4.49519 42.9668 5.88939 46.1788C7.25552 49.3254 10.8762 50.8105 14.0572 49.5723C11.1148 50.4648 7.90075 49.0315 6.65084 46.1541C5.30915 43.0634 6.73788 39.479 9.84256 38.1472L9.84463 38.1497Z"
            fill="#13341C"
          />
          <path
            d="M65.8358 46.8068C65.5155 41.268 60.7412 37.0314 55.1753 37.3443C54.3018 37.3944 53.4613 37.5521 52.6644 37.8048L51.2745 34.5075L51.1284 34.5687L49.8628 31.7522C50.4367 31.562 51.1169 31.4014 51.9386 31.2903C54.0259 31.008 57.3813 31.3768 58.2754 31.6647C59.3768 32.0183 60.7798 32.8712 61.2397 33.0373C61.6996 33.2034 62.6915 33.2005 62.6915 33.2005C62.6915 33.2005 60.4707 30.7707 59.5535 30.1028C58.6362 29.435 55.993 28.7328 53.798 28.5083C53.022 28.4273 51.772 28.3825 50.5099 28.4754L49.1285 23.5577L44.0057 19.6715L44.9772 22.1168L44.1516 22.466L44.6257 23.5207C44.5364 23.5068 44.4468 23.4951 44.3577 23.4788C43.8202 23.388 44.097 23.4794 43.7333 23.3279C43.7333 23.3279 43.7047 23.3574 43.6605 23.4014C42.9176 22.8027 41.3056 21.3421 40.8259 20.5856C40.2043 19.6058 39.255 18.8652 38.919 18.6726C38.7425 17.8435 38.1698 15.2801 37.6835 14.4534C38.0803 14.2424 38.4828 14.0436 38.8954 13.8597C38.7093 13.2566 38.5218 12.7113 38.3262 12.355C38.248 12.2125 38.088 12.0499 37.8712 11.8744C37.9662 11.6782 38.0803 11.477 38.2271 11.2978C39.17 11.8757 40.0586 12.3946 40.4021 12.5602C40.4021 12.5602 41.0091 12.3873 41.6008 11.5134C42.1099 10.7629 42.0718 10.5481 42.0463 10.3903L41.7193 10.3561L41.0996 10.0043C41.0996 10.0043 41.8114 8.76072 42.18 6.96951C42.18 6.96951 44.1891 7.23486 44.6026 7.24329C45.0092 7.251 45.5045 7.23323 45.481 7.01306C45.4484 6.72248 42.2308 4.96679 41.9877 4.68664C41.3293 3.92539 38.6205 2.825 36.5576 3.96684C36.2413 4.14226 35.9809 4.33973 35.7682 4.54913C35.6951 4.5137 35.6461 4.53639 35.4289 4.78931C35.275 4.97011 35.1773 5.21468 35.129 5.47599C34.71 6.4351 34.8482 7.45238 34.8342 8.03226C34.8241 8.37398 34.9515 8.84818 35.2623 9.26046L34.3494 9.79975C34.3241 9.79711 34.3038 9.79036 34.2905 9.78434C34.2962 9.79651 34.3042 9.80893 34.3122 9.82135L34.285 9.83703C33.9191 9.66219 33.5839 9.50675 33.3084 9.38071C32.8462 9.17033 32.3045 9.25274 31.927 9.59084C30.7841 10.6157 28.306 12.8583 26.5678 14.657C26.5678 14.657 25.4807 15.4607 23.2622 18.2261C22.4835 19.1963 22.3295 20.0024 22.0627 20.1946C21.7959 20.3867 20.2805 22.4149 20.7696 24.0849C20.9533 24.7109 21.4721 25.2491 22.071 25.6891C20.5525 25.1392 16.8161 23.5355 16.1126 23.4296C15.3309 23.3132 15.0199 23.2599 14.6341 23.2544C14.3738 23.2504 10.3432 22.1463 7.59159 21.5903C6.22384 21.3132 3.25213 21.6167 3.25213 21.6167C3.46461 21.6551 6.04171 22.9015 7.46255 23.4506C10.3355 24.5611 12.2 25.8328 12.161 25.9167C12.1336 25.9787 12.8849 26.7195 13.6788 27.4764L10.8033 25.944C10.6227 25.8464 10.4138 25.8177 10.2093 25.8589L8.92473 26.1231C8.61072 26.1876 8.35438 26.4133 8.21894 26.7072C7.8869 26.7883 7.65161 26.9907 7.55565 27.0849C7.44904 27.1919 7.30846 27.8026 7.30649 27.9552C7.30649 27.9552 7.58438 28.2367 7.63465 28.2234C7.68237 28.2122 7.76706 27.7578 7.96683 27.8065C8.00319 27.8149 8.0444 27.8215 8.08331 27.8279L8.04373 28.6529C8.02346 29.07 8.24246 29.4472 8.59591 29.6069L18.9193 34.2491L19.6314 34.1614L20.0559 33.5294C20.9011 34.1295 21.8304 34.838 22.3628 35.3568C22.7686 35.7512 23.8229 36.3106 24.9255 36.831C24.9853 37.0827 24.9755 37.355 24.7914 37.6021C24.5995 37.8577 24.3669 38.3684 24.1533 38.9205C23.8676 39.1825 23.3663 39.7694 23.6879 40.3009C23.6176 40.5507 23.5678 40.7609 23.5486 40.9002L21.582 41.1858C21.4584 40.7421 21.3064 40.3024 21.1167 39.8681C18.9041 34.7733 12.9624 32.4205 7.84241 34.6166C2.7247 36.8129 0.366464 42.7228 2.57879 47.8199C4.79136 52.9146 10.733 55.2674 15.8531 53.0713C19.7912 51.3818 22.0919 47.4948 21.9372 43.4695L25.3455 42.9754C25.3846 43.0906 25.4572 43.1978 25.5608 43.2758L26.6769 44.1357C26.9355 44.3341 27.3009 44.3121 27.5319 44.0837L27.932 43.6855C28.5282 44.2179 29.1806 44.7029 29.6905 44.9692C32.258 46.3073 34.8511 45.2162 34.8511 45.2162C36.0512 45.0473 36.8757 45.3326 37.233 45.1661C37.7174 44.941 38.4841 44.3309 39.0511 43.7833C39.4662 44.0652 39.9139 44.237 40.338 44.2326C41.3537 44.2252 42.5302 43.681 42.8414 43.0187C43.401 41.8287 43.2464 39.9644 43.1287 39.0627C43.5138 39.0983 43.898 39.0967 44.0885 38.8549C44.4696 38.3712 45.0056 38.2535 45.2992 37.7607C45.5927 37.2679 45.8768 35.5953 45.9736 35.1584C46.0707 34.7192 46.0945 34.0894 46.0945 34.0894L45.7861 33.8326C46.5023 33.5947 47.4488 33.2025 47.909 32.8082C48.1034 32.6409 48.3274 32.479 48.5881 32.3232L49.8423 35.1153L49.6644 35.1917L51.0527 38.4819C47.6664 40.2591 45.4488 43.8861 45.6842 47.9407C46.0045 53.4794 50.7788 57.716 56.3447 57.4031C61.9105 57.0902 66.1632 52.3439 65.8429 46.8052L65.8358 46.8068ZM24.199 35.0714C23.5077 34.7143 22.2669 33.1094 20.9222 32.2325L21.1565 31.8841C22.4523 32.7165 24.3777 33.9621 24.3826 34.0043C24.4162 34.3066 24.4296 34.7804 24.4335 35.1885C24.3427 35.1443 24.2609 35.1033 24.199 35.0714ZM15.3077 51.8285C10.8797 53.7286 5.73826 51.6933 3.82413 47.2852C1.91 42.877 3.95002 37.7631 8.37804 35.863C12.8061 33.9629 17.9475 35.9982 19.8616 40.4064C20.0025 40.7291 20.1174 41.0561 20.2159 41.3837L19.8992 41.4293C19.8073 41.1279 19.699 40.8271 19.5693 40.531C17.7246 36.283 12.7685 34.3226 8.50155 36.1515C4.23437 37.9827 2.26946 42.9122 4.11187 47.16C5.95659 51.4081 10.9127 53.3684 15.1796 51.5396C18.4038 50.1553 20.3135 47.0034 20.2589 43.7135L20.5733 43.6676C20.646 47.096 18.6637 50.3863 15.3054 51.8283L15.3077 51.8285ZM9.4573 43.7415C9.40355 45.0143 10.3994 46.0887 11.6763 46.1433C12.7123 46.1866 13.6172 45.5469 13.9506 44.6275L19.7343 43.7884C19.7594 46.8482 17.9715 49.7698 14.9716 51.0569C10.97 52.7746 6.32493 50.9347 4.5946 46.951C2.86428 42.9674 4.70843 38.3472 8.71003 36.6295C12.7116 34.9119 17.3567 36.7518 19.087 40.7354C19.1978 40.9902 19.2922 41.2455 19.3746 41.5043L13.539 42.3495C13.1347 41.8742 12.5411 41.5621 11.869 41.5336C10.5897 41.4788 9.51105 42.4686 9.45754 43.7392L9.4573 43.7415ZM38.5698 25.8738C37.3935 26.1934 35.911 26.6362 34.804 27.0278C32.9772 24.704 30.006 21.1003 30.006 21.1003C30.006 21.1003 30.4095 20.67 30.8653 20.2057C31.8217 19.3398 33.3642 18.0764 34.369 17.4379C34.6608 18.1655 35.182 19.4381 35.3765 19.7387C35.4165 19.8008 35.4686 19.8595 35.5255 19.9164C35.6851 20.1044 35.9344 20.3922 36.0742 20.5249L36.466 20.897C36.7185 21.1318 37.0458 21.4532 37.285 21.726C37.4451 21.9094 37.7106 22.1525 38.0471 22.4077C38.657 22.8767 39.488 23.3896 40.2772 23.6781C41.4987 24.1299 42.518 24.556 42.518 24.556C42.518 24.556 42.518 24.556 42.679 24.3967C42.6138 24.4641 42.5567 24.5206 42.5176 24.5605C42.2604 24.8163 42.325 24.867 42.3605 25.0398C42.396 25.2126 42.7143 25.1068 43.0071 25.2671C43.0577 25.2955 43.1099 25.3311 43.1638 25.3715C41.9871 25.2046 41.0085 25.2136 38.5698 25.8738ZM40.7291 42.8051C40.4312 42.8713 40.1236 42.7859 39.8433 42.6385C39.9177 42.3498 39.9542 42.1336 40.1924 41.6582C40.4656 41.1146 41.4908 39.612 41.9938 39.1643C42.0385 39.7618 42.0884 40.5545 42.061 40.906C41.965 42.0934 41.6963 42.5934 40.7314 42.8053L40.7291 42.8051ZM52.4228 41.747C50.4705 42.9212 49.2181 45.1065 49.3606 47.5324C49.5598 50.9532 52.4485 53.5848 55.8667 53.5085C52.7927 53.3428 50.2683 50.8998 50.0876 47.7704C49.9606 45.5754 51.0181 43.5852 52.7088 42.4184L54.0936 45.6989C53.6748 46.0976 53.4032 46.6482 53.3754 47.2707C53.3217 48.5435 54.3176 49.6179 55.5945 49.6725C56.8737 49.7273 57.9524 48.7375 58.0059 47.4669C58.0597 46.1941 57.0638 45.1197 55.7869 45.0651C55.7685 45.0632 55.7496 45.0658 55.7309 45.0662L54.2848 41.638C54.7788 41.4765 55.304 41.3738 55.8471 41.3448C57.9475 41.226 59.8596 42.176 61.0534 43.7181C59.8462 41.8805 57.7145 40.7153 55.3542 40.8487C54.9 40.8731 54.4616 40.9477 54.04 41.0612L53.5248 39.8424C54.0938 39.6772 54.6869 39.57 55.3051 39.535C59.6581 39.29 63.3883 42.6023 63.6392 46.9318C63.8902 51.2612 60.5651 54.9718 56.2144 55.217C51.8614 55.462 48.1313 52.1497 47.8803 47.8202C47.7013 44.7189 49.3536 41.9361 51.9064 40.5165L52.4271 41.7497L52.4228 41.747ZM56.26 56.051C51.4435 56.3216 47.3147 52.6574 47.0354 47.864C46.8338 44.399 48.7037 41.2938 51.5736 39.736L51.6969 40.0268C48.9465 41.5323 47.1591 44.5163 47.3515 47.8461C47.6189 52.4644 51.6007 55.9976 56.2417 55.7364C60.8827 55.4751 64.4292 51.5167 64.1618 46.8983C63.8945 42.28 59.9127 38.7468 55.2717 39.008C54.5949 39.0462 53.94 39.1655 53.3178 39.3506L53.1947 39.0575C53.8509 38.8597 54.5392 38.7324 55.2535 38.6912C60.0701 38.4205 64.1988 42.0848 64.4782 46.8781C64.7553 51.6712 61.0771 55.7757 56.2603 56.0487L56.26 56.051Z"
            fill="#13341C"
          />
        </g>
        <defs>
          <clipPath id="clip0_11309_36">
            <rect
              width="65"
              height="53"
              fill="white"
              transform="translate(5.50391) rotate(5.96045)"
            />
          </clipPath>
        </defs>
      </svg>
      <svg
        ref={nuiRef}
        xmlns="http://www.w3.org/2000/svg"
        className="h-full w-full max-sm:hidden"
        fill="none"
      >
        <path
          width="100%"
          height="100%"
          d="M4.44393 6.32847C4.38697 6.32647 4.3301 6.32444 4.27333 6.3224C4.45999 6.3224 4.63916 6.32232 4.811 6.32218C8.62587 6.25929 9.74626 6.31815 4.811 6.32218C4.69126 6.32416 4.56887 6.32625 4.44393 6.32847C19.8048 6.86902 41.8048 5.95188 56.6013 7.68951C66.7895 8.88596 77.7971 9.65078 88.3718 10.1608C107.046 11.0615 126.861 14.3912 144.749 16.3128C183.71 20.4982 249.58 27.2 287.249 20.0461C313.864 14.9915 333.482 7.81607 365.897 7.26886C383.188 6.97696 399.481 5.6608 416.356 5.37594C423.649 5.25282 447.091 0.237699 447.815 0.433311C465.295 5.15461 484.665 11.2898 507.462 13.0002C543.842 15.7297 580.617 14.0821 616.79 18.1532C619.791 18.4908 663.859 40.3255 667 39C673.84 36.1134 683.588 34.4603 693.631 32.9532C705.006 31.2463 711.445 41.4187 724.82 41.4187C732.498 41.4187 733.669 40.6985 740.082 39.7361C744.932 39.0083 751.049 40.1687 755.5 39C763.296 36.9529 761.812 53.1826 772.373 53.1826C777.563 53.1826 780.549 54.1291 784.987 54.1291C791.48 54.1291 796.038 52.3636 803.209 52.2362C819.323 51.9498 819.408 50.9758 827.815 56.9685C831.916 59.8909 837.614 60.961 844.635 62.8575C852.923 65.0962 860.344 66.9972 871.111 68.1156C888.454 69.9173 912.673 68.9306 927.176 72.8479C935.537 75.1062 952.088 75.1691 960.816 77.5802C974.254 81.2922 997.532 82.6052 1013.46 85.1518C1021.01 86.3598 1071.54 94.2134 1077.93 91.5141C1090.05 86.3976 1115.04 81.5574 1132.6 78.2638C1145.23 75.8943 1155.85 75.8956 1170.44 75.8975L1171.69 75.8976C1178.67 75.8976 1178.89 77.6297 1185.08 77.7905C1193.13 77.9997 1199.75 78.737 1208.28 78.737C1241.12 78.737 1272.7 78.3503 1304.69 81.0505C1317.87 82.1636 1333.32 84.4157 1347.05 84.4157H1389.1C1393.2 84.4157 1403.3 85.0468 1405.92 83.9425C1409.18 82.564 1418.89 85.1911 1422.74 85.5725C1436.27 86.9169 1450.48 91.7033 1464.78 91.9874C1470.37 92.0983 1473.76 92.9143 1478.8 93.6699C1487.57 94.986 1499.05 92.9676 1508.08 94.3535C1520.54 96.2657 1543.77 94.2199 1554.33 97.1929C1559.34 98.6025 1592.27 98.093 1598.33 98.6775C1618.48 100.622 1619.51 107.899 1619.51 113.611C1637.37 139.196 1626.11 914.92 1625.14 1004.43C1626.15 1005.58 1627.94 1006.37 1630.99 1006.44C1633.7 1006.51 1630.54 1006.49 1625.11 1006.45C1625.08 1009.26 1625.07 1011.17 1625.07 1012.12V1006.45C1615.82 1006.38 1600.02 1006.23 1595.4 1006.23H1593.9C1583.02 1006.23 1570.87 1006.23 1559.42 1006.44C1522.08 1007.13 1485.99 1006.98 1449.01 1006.18C1391.67 1004.93 1332.74 1000.55 1275.67 1000.55C1218.39 1000.55 1162.37 999.606 1105.45 999.606H998.767C964.152 999.606 930.353 1001.24 895.824 1001.45C817.482 1001.9 739.013 1001.5 660.66 1001.5H157.938H55.7739C44.2989 1001.5 30.4251 1002.2 19.1755 1001.5C-20.9459 1001.5 -25.6756 972.625 -17.8887 972.625C-25.8183 958.436 -23.7595 85.6463 -23.7595 71.2075V22.4122V10.1082C-23.7595 7.18925 -3.92971 6.47722 4.44393 6.32847Z"
          fill="#13341C"
        />
      </svg>
      <svg
        ref={nuiRef2}
        xmlns="http://www.w3.org/2000/svg"
        className="h-full w-full bg-[url(/images/about/commit-mmb2.png)] sm:hidden"
        fill="none"
      >
        <path
          width="100%"
          height="100%"
          d="M-9.16021 4.67656C-9.19685 4.67527 -9.23343 4.67397 -9.26995 4.67265C-9.14988 4.67265 -9.03462 4.67261 -8.92408 4.67252C-6.47014 4.63206 -5.74945 4.66992 -8.92408 4.67252C-9.0011 4.67379 -9.07984 4.67513 -9.16021 4.67656C0.720823 5.02428 14.8725 4.43432 24.3905 5.55206C30.9441 6.32169 38.0249 6.81367 44.8272 7.14175C56.8397 7.72114 69.5858 9.86298 81.0923 11.0991C106.154 13.7914 148.526 18.1024 172.757 13.5005C189.877 10.2492 202.496 5.63347 223.348 5.28147C234.47 5.09371 244.951 4.24708 255.806 4.06384C260.497 3.98464 275.576 0.758618 276.042 0.884446C287.286 3.92146 299.746 7.86796 314.411 8.96821C337.813 10.724 361.468 9.66417 384.737 12.2829C386.667 12.5001 415.015 26.5454 417.035 25.6928C421.435 23.836 427.705 22.7726 434.166 21.8032C441.483 20.7052 445.625 27.2487 454.228 27.2487C459.167 27.2487 459.92 26.7854 464.046 26.1663C467.166 25.6982 471.1 26.4446 473.963 25.6928C478.978 24.376 478.023 34.8159 484.817 34.8159C488.156 34.8159 490.077 35.4247 492.931 35.4247C497.108 35.4247 500.04 34.2891 504.653 34.2071C515.018 34.0229 515.073 33.3964 520.481 37.2512C523.118 39.1311 526.784 39.8194 531.3 41.0394C536.632 42.4794 541.405 43.7022 548.331 44.4217C559.487 45.5807 575.066 44.9459 584.396 47.4658C589.774 48.9184 600.42 48.9589 606.035 50.5099C614.679 52.8977 629.653 53.7422 639.896 55.3804C644.755 56.1575 677.256 61.2093 681.37 59.473C689.169 56.1817 705.238 53.0683 716.533 50.9496C724.659 49.4254 731.493 49.4263 740.877 49.4275L741.679 49.4275C746.172 49.4275 746.312 50.5417 750.294 50.6452C755.476 50.7798 759.733 51.254 765.221 51.254C786.341 51.254 806.654 51.0053 827.232 52.7422C835.715 53.4582 845.654 54.9069 854.481 54.9069H881.53C884.171 54.9069 890.666 55.3129 892.349 54.6025C894.45 53.7158 900.698 55.4057 903.168 55.651C911.878 56.5158 921.017 59.5947 930.217 59.7774C933.811 59.8488 935.994 60.3737 939.233 60.8597C944.875 61.7063 952.258 60.408 958.067 61.2995C966.082 62.5295 981.023 61.2135 987.82 63.1259C991.043 64.0327 1012.22 63.7049 1016.12 64.0809C1029.09 65.3314 1029.75 70.0125 1029.75 73.6867C1041.24 90.1446 1033.99 589.136 1033.36 646.714C1034.01 647.456 1035.17 647.961 1037.13 648.008C1038.87 648.05 1036.84 648.043 1033.35 648.016C1033.33 649.819 1033.32 651.048 1033.32 651.661V648.016C1027.37 647.971 1017.21 647.873 1014.24 647.873H1013.28C1006.28 647.872 998.458 647.872 991.095 648.008C967.075 648.452 943.855 648.357 920.067 647.839C883.189 647.036 845.279 644.22 808.567 644.22C771.719 644.22 735.683 643.611 699.07 643.611H630.447C608.181 643.611 586.439 644.666 564.228 644.795C513.834 645.088 463.358 644.829 412.957 644.829H89.5762H23.8583C16.4769 644.829 7.55243 645.281 0.31601 644.829C-25.4925 644.829 -28.5348 626.256 -23.5259 626.256C-28.6266 617.128 -27.3023 55.6985 -27.3023 46.4106V15.0226V7.10793C-27.3023 5.23026 -14.5466 4.77224 -9.16021 4.67656Z"
          fill="#13341C"
        />
      </svg>
    </div>
  );
};

export default TestM;
